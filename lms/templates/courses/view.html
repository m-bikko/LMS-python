{% extends 'base.html' %}

{% block title %}{{ course.title }} - LMS{% endblock %}

{% block content %}
<h1>{{ course.title }}</h1>

<div class="card mb-4">
    <div class="card-header">
        <h3>Course Details</h3>
    </div>
    <div class="card-body">
        <p><strong>Teacher:</strong> {{ course.teacher.get_full_name() }}</p>
        <p><strong>Category:</strong> {{ course.category.name if course.category else 'Uncategorized' }}</p>
        <p><strong>Created:</strong> {{ course.created_at.strftime('%Y-%m-%d') }}</p>
        <p>{{ course.description }}</p>
    </div>
</div>

<div class="card mb-4">
    <div class="card-header">
        <h3>Course Materials</h3>
    </div>
    <div class="card-body">
        {% if materials %}
            <ul>
                {% for material in materials %}
                <li>
                    <strong>{{ material.title }}</strong> ({{ material.content_type }})
                    {% if material.content_type == 'text' %}
                        <p>{{ material.content }}</p>
                    {% elif material.content_type == 'link' %}
                        <p><a href="{{ material.content }}" target="_blank">{{ material.content }}</a></p>
                    {% elif material.content_type == 'file' and material.file_path %}
                        <a href="{{ url_for('course.download_file', filename=material.file_path) }}" class="btn btn-sm btn-primary" target="_blank">Download</a>
                    {% endif %}
                </li>
                {% endfor %}
            </ul>
        {% else %}
            <p>No materials available for this course.</p>
        {% endif %}
    </div>
</div>

<div class="card">
    <div class="card-header">
        <h3>Assignments</h3>
    </div>
    <div class="card-body">
        {% if assignments %}
            <ul>
                {% for assignment in assignments %}
                <li>
                    <strong>{{ assignment.title }}</strong>
                    <p>{{ assignment.description }}</p>
                </li>
                {% endfor %}
            </ul>
        {% else %}
            <p>No assignments available for this course.</p>
        {% endif %}
    </div>
</div>
{% endblock %}